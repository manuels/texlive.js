%%
%% This is file `pfnote.sty',
%% generated with the docstrip utility.
%%
%% The original source files were:
%%
%% yafoot.dtx  (with options: `pfnote')
%% 
%% IMPORTANT NOTICE:
%% 
%% For the copyright see the source file.
%% 
%% Any modified versions of this file must be renamed
%% with new filenames distinct from pfnote.sty.
%% 
%% For distribution of the original source see the terms
%% for copying and modification in the file yafoot.dtx.
%% 
%% This generated file may be distributed as long as the
%% original source files, as listed above, are part of the
%% same distribution. (The sources need not necessarily be
%% in the same archive or directory.)
%% Style file `pfnote'.
%% Copyright (C) 1999  Hiroshi Nakashima <nakasima@tutics.tut.ac.jp>
%%        (Toyohashi Univ. of Tech.)
%%
%% This program can be redistributed and/or modified under the terms
%% of the LaTeX Project Public License distributed from CTAN
%% archives in directory macros/latex/base/lppl.txt; either
%% version 1 of the License, or any later version.
%%
%% \CharacterTable
%%  {Upper-case    \A\B\C\D\E\F\G\H\I\J\K\L\M\N\O\P\Q\R\S\T\U\V\W\X\Y\Z
%%   Lower-case    \a\b\c\d\e\f\g\h\i\j\k\l\m\n\o\p\q\r\s\t\u\v\w\x\y\z
%%   Digits        \0\1\2\3\4\5\6\7\8\9
%%   Exclamation   \!     Double quote  \"     Hash (number) \#
%%   Dollar        \$     Percent       \%     Ampersand     \&
%%   Acute accent  \'     Left paren    \(     Right paren   \)
%%   Asterisk      \*     Plus          \+     Comma         \,
%%   Minus         \-     Point         \.     Solidus       \/
%%   Colon         \:     Semicolon     \;     Less than     \<
%%   Equals        \=     Greater than  \>     Question mark \?
%%   Commercial at \@     Left bracket  \[     Backslash     \\
%%   Right bracket \]     Circumflex    \^     Underscore    \_
%%   Grave accent  \`     Left brace    \{     Vertical bar  \|
%%   Right brace   \}     Tilde         \~}
%%
%%
\def\next{LaTeX2e}
\ifx\fmtname\next
\def\next{
\NeedsTeXFormat{LaTeX2e}[1994/12/01]
\ProvidesPackage{pfnote}}
\else\def\next[#1]{}\fi
\next
[1999/07/14 v1.0 ]

\newcount\pfn@fnotectr \pfn@fnotectr\z@
\newcount\pfn@page \pfn@page\@ne
\newcount\pfn@pageprev \pfn@pageprev\z@

\let\pfn@footnote\footnote
\def\footnote{\@ifnextchar[%]
        {\pfn@footnote}%
        {\ifx\@mpfn\pfn@mpfn \pfn@adjust \fi \pfn@footnote}}
\let\pfn@footnotemark\footnotemark
\def\footnotemark{\@ifnextchar[%]
        {\pfn@footnotemark}{\pfn@adjust \pfn@footnotemark}}
\let\pfn@mpfn\@mpfn

\def\pfn@adjust{\global\advance\pfn@fnotectr by\@ne
        \if@filesw
                \edef\@tempa{\write\@auxout{\string\pfn@fnpage
                        {\number\pfn@fnotectr}%
                        {\noexpand\number\noexpand\pfn@page}}}\@tempa \fi
        \expandafter\ifx\csname pfn@fn\number\pfn@fnotectr\endcsname\relax
                \global\c@footnote\z@ \else
        \expandafter\@tempcnta\csname pfn@fn\number\pfn@fnotectr\endcsname
        \relax \ifnum\@tempcnta=\pfn@pageprev\else
                \global\pfn@pageprev\@tempcnta \global\c@footnote\z@ \fi \fi}

\def\pfn@fnpage#1#2{\global\@namedef{pfn@fn#1}{#2}}

\let\pfn@outputpage\@outputpage
\def\@outputpage{\pfn@outputpage \global\advance\pfn@page\@ne}
\endinput
%%
%% End of file `pfnote.sty'.
