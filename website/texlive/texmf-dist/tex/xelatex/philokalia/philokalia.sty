%%
%% This is file `philokalia.sty',
%% generated with the docstrip utility.
%%
%% The original source files were:
%%
%% philokalia.dtx  (with options: `philokalia')
%% 
%%  (c) Copyright 2007 Apostolos Syropoulos
%%  This program can be redistributed and/or modified under the
%%  terms of the LaTeX Project Public License Distributed from
%%  http://www.latex-project.org/lppl.txt; either
%%  version 1.3c of the License, or any later version.
%% 
%%  This work has the LPPL maintenance status `maintained'.
%% 
%%  Please report errors or suggestions for improvement to
%% 
%%     Apostolos Syropoulos  (asyropoulos@yahoo.com)
%% 
%% \CharacterTable
%%  {Upper-case    \A\B\C\D\E\F\G\H\I\J\K\L\M\N\O\P\Q\R\S\T\U\V\W\X\Y\Z
%%   Lower-case    \a\b\c\d\e\f\g\h\i\j\k\l\m\n\o\p\q\r\s\t\u\v\w\x\y\z
%%   Digits        \0\1\2\3\4\5\6\7\8\9
%%   Exclamation   \!     Double quote  \"     Hash (number) \#
%%   Dollar        \$     Percent       \%     Ampersand     \&
%%   Acute accent  \'     Left paren    \(     Right paren   \)
%%   Asterisk      \*     Plus          \+     Comma         \,
%%   Minus         \-     Point         \.     Solidus       \/
%%   Colon         \:     Semicolon     \;     Less than     \<
%%   Equals        \=     Greater than  \>     Question mark \?
%%   Commercial at \@     Left bracket  \[     Backslash     \\
%%   Right bracket \]     Circumflex    \^     Underscore    \_
%%   Grave accent  \`     Left brace    \{     Vertical bar  \|
%%   Right brace   \}     Tilde         \~}
\ProvidesFile{philokalia.sty}
[2007/01/24 v1.1 Package `philokalia']
\RequirePackage{fontspec}
\RequirePackage{xunicode}
\RequirePackage{xltxtra}
\RequirePackage{lettrine}
\newsavebox{\Pb@x}
\def\Lettrine@height{%
   \@tempdima=\baselineskip
   \setlength{\L@height}{\theL@lines\@tempdima}%
   \ifnum\theL@lines>1
     \addtolength{\L@height}{-\@tempdima}%
   \fi
   \sbox{\L@tbox}{\LettrineTextFont "03B1}%%%% Modified here
   \addtolength{\L@height}{\ht\L@tbox}%
   \addtolength{\L@height}{\L@oversize\L@height}}
\renewcommand*{\LettrineFont}{%
   \Lettrine@height
   \sbox{\L@tbox}{\LettrineFontHook\fontsize{\L@height}{\L@height}%
                  \selectfont "0391}%%%% Modified here
   \@tempcntb=\ht\L@tbox
   \@tempcnta=\L@height
   \multiply\@tempcnta by 100
   \divide\@tempcntb by 100
   \divide\@tempcnta by \@tempcntb
   \advance\@tempcnta by -9999
   \ifnum\@tempcnta>0
     \def\@tempa{1.\the\@tempcnta}%
   \else
     \def\@tempa{1}%
   \fi
   \LettrineFontHook
   \fontsize{\@tempa\L@height}{\@tempa\L@height}%
   \selectfont
}
\DeclareOption{global}{%
   \renewcommand{\rmdefault}{plk}%
   \DeclareFontFamily{EU1}{plktitl}{}%
   \DeclareFontShape{EU1}{plktitl}{m}{n}%
    {<-> "[Philokalia-Regular]/ICU:script=grek,+titl"}{}%
   \newcommand{\textinit}[2]{%
       \savebox{\Pb@x}{\usefont{EU1}{plktitl}{m}{n} #1}%
       \lettrine[lines=3]{\usebox{\Pb@x}}{#2}}%
}
\DeclareOption{local}{%
   \def\phkl{\fontfamily{plk}\selectfont}%
   \newcommand{\textphlk}[1]{{\phkl #1}}%
}
\ExecuteOptions{local}
\ProcessOptions
\def\dsubop{{\fontfamily{plk}\selectfont\char"018B}}
\def\dUnit{{\fontfamily{plk}\selectfont\char"018C}}
\def\dunit{{\fontfamily{plk}\selectfont\char"018D}}
\def\dunknown{{\fontfamily{plk}\selectfont\char"018E}}
\endinput
%%
%% End of file `philokalia.sty'.
