%%
%% This is file `eolgrab-example-sec.tex',
%% generated with the docstrip utility.
%%
%% The original source files were:
%%
%% eolgrab.dtx  (with options: `example-sec')
%% 
%% This is a generated file.
%% 
%% Project: eolgrab
%% Version: 2011/01/12 v1.0
%% 
%% Copyright (C) 2011 by
%%    Heiko Oberdiek <heiko.oberdiek at googlemail.com>
%% 
%% This work may be distributed and/or modified under the
%% conditions of the LaTeX Project Public License, either
%% version 1.3c of this license or (at your option) any later
%% version. This version of this license is in
%%    http://www.latex-project.org/lppl/lppl-1-3c.txt
%% and the latest version of this license is in
%%    http://www.latex-project.org/lppl.txt
%% and version 1.3 or later is part of all distributions of
%% LaTeX version 2005/12/01 or later.
%% 
%% This work has the LPPL maintenance status "maintained".
%% 
%% This Current Maintainer of this work is Heiko Oberdiek.
%% 
%% The Base Interpreter refers to any `TeX-Format',
%% because some files are installed in TDS:tex/generic//.
%% 
%% This work consists of the main source file eolgrab.dtx
%% and the derived files
%%    eolgrab.sty, eolgrab.pdf, eolgrab.ins, eolgrab.drv,
%%    eolgrab-example-ltx.tex, eolgrab-example-env.tex,
%%    eolgrab-example-sec.tex, eolgrab-test1.tex,
%%    eolgrab-test2.tex.
%% 
\documentclass{article}
\usepackage{eolgrab}
\makeatletter
\newcommand*{\eolsection}{%
  \@ifstar{%
    \eolgrab{\section*}%
  }{%
    \@ifnextchar[{%
      \eoloptsection
    }{%
      \eolgrab\section
    }%
  }%
}
\newcommand*{\eoloptsection}[1][]{%
  \eolgrab{\section[{#1}]}%
}
\makeatother
\begin{document}
\tableofcontents
\eolsection Section without star and optional argument
\eolsection*Section with star
\eolsection[Short section title]Long section title
\end{document}
\endinput
%%
%% End of file `eolgrab-example-sec.tex'.
